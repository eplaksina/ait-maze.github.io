<!DOCTYPE html>
<html lang="en">

<head>
  <title>AIT-MAZE</title>
  <script src="https://aframe.io/releases/0.8.0/aframe.min.js"></script>
  <script src="../bundle.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>
  <script
    src="//cdn.jsdelivr.net/gh/donmccurdy/aframe-physics-system@v3.2.0/dist/aframe-physics-system.min.js"></script>
  <script
    src="https://unpkg.com/aframe-particle-system-component@1.0.x/dist/aframe-particle-system-component.min.js"></script>
  <script src="https://unpkg.com/aframe-animation-component@^4.1.2/dist/aframe-animation-component.min.js"></script>
  <link rel="stylesheet" href="/assets/css/styles.css">
</head>

<body>
  <div class="header row">
    <!-- points -->
    <div class="header__points row">
      <div id="takeGifts" class="header__points-take-gifts">0 </div>
      <div class="header__points-all-gift"> / 6</div>
    </div>

    <div class="header__restart-btn">restart</div>
  </div>

  <div class="start-game">
    <div class="start-game__text">
      Собери все подарки и возвращайся к ёлочке, чтобы узнать, какой ты кот в следующем году
    </div>

    <button class="start-game__btn">Ok</button>
  </div>

  <div class="end-game">
    <div id="cat-result" class="result">
      
    </div>

    <button class="end-game__btn">Ok</button>
  </div>


  <a-scene background="color: #fff" physics>
    <a-assets>
      <img id="skyTexture"
        src="/assets/imgs/sky.png" />
      <img id="groundTexture"
        src="/assets/imgs/snow.jpg" />

      <a-asset-item id="giftModel" src="/assets/models/present_v2/scene.gltf"></a-asset-item>

      <a-asset-item id="giftModelAit" src="/assets/models/ait-gift.glb"></a-asset-item>

      <a-asset-item id="treeModelAit" src="/assets/models/cute_christmas_frog/scene.gltf"></a-asset-item>

      <a-mixin id="heightWall" geometry="height: 70"></a-mixin>
      <a-mixin id="wallColor" material="color: #ebf3ff; src: #groundTexture"></a-mixin>
      <a-mixin id="spotLightColor" light="color: #405b68; ground-color: #fff; intensity: 0.5; decay: 0.5"></a-mixin>
    </a-assets>

    <!--Camera-->
    <a-entity id="rig" movement-controls kinematic-body position="0 0 330" wasd-controls="acceleration: 220"
      look-controls="pointerLockEnabled: true">
      <a-entity id="camera" camera position="0 0 0" camera-listener></a-entity>
    </a-entity>

    <a-sky id="background" src="#skyTexture" theta-length="90" rotation="0 -180 0" position="0 -35 0" radius="350">
    </a-sky>

    <!--Ground-->
    <a-box radius="365" transparent="true" opacity="0" height="20" width="800" depth="800" position="0 -10 0"
      static-body></a-box>

    <a-cylinder id="ground" src="#groundTexture" color="#fff" radius="365" height="70" position="0 -65 0" static-body>
    </a-cylinder>

    <!--Snow-->
    <a-entity position="0 50 0" particle-system="preset: snow; particleCount: 250000; positionSpread: 10000 50 10000">
    </a-entity>

    <!--Maze-->
    <a-box position="-30 0 200" width="20" mixin="heightWall wallColor" geometry="width: 20; depth: 91;" static-body>
    </a-box>

    <a-box position="30 0 200" mixin="heightWall wallColor" geometry="width: 20; depth: 91" static-body></a-box>

    <a-box position="-109 0 164.45" rotation="0 -90 0" width="20" mixin="heightWall wallColor"
      geometry="width: 20; depth: 174;" static-body></a-box>

    <a-box position="-187 0 -30" rotation="0 0 0" width="20" mixin="heightWall wallColor"
      geometry="width: 20; depth: 370;" static-body></a-box>

    <a-box position="-5.5 0 -205" rotation="0 -90 0" width="20" mixin="heightWall wallColor"
      geometry="width: 20; depth: 380;" static-body></a-box>

    <a-box position="108 0 164.45" rotation="0 -90 0" width="20" mixin="heightWall wallColor"
      geometry="width: 20; depth: 174;" static-body></a-box>

    <a-box position="185 0 -21" rotation="0 0 0" width="20" mixin="heightWall wallColor"
      geometry="width: 20; depth: 388.5;" static-body></a-box>

    <a-box position="0 0 105" mixin="heightWall wallColor" geometry="width: 100; depth: 20" static-body></a-box>

    <a-box position="-60 0 -45" mixin="heightWall wallColor" geometry="width: 20; depth: 320" static-body></a-box>

    <a-box position="60 0 80" mixin="heightWall wallColor" width="20" depth="70" static-body></a-box>

    <a-box position="-120 0 99" mixin="heightWall wallColor" depth="130" width="20" static-body></a-box>

    <a-box position="0 0 70" mixin="heightWall wallColor" geometry="width: 20; depth: 50" static-body></a-box>

    <a-box position="-145 0 -18" rotation="0 90 0" mixin="heightWall wallColor" geometry="width: 20; depth: 70"
      static-body></a-box>

    <a-box position="-5 0 -80" rotation="0 90 0" mixin="heightWall wallColor" geometry="width: 20; depth: 250"
      static-body></a-box>

    <a-box position="120 0 98" mixin="heightWall wallColor" geometry="width: 20; depth: 140" static-body></a-box>

    <a-box position="126 0 -20" rotation="0 90 0" mixin="heightWall wallColor" geometry="width: 20; depth: 100"
      static-body></a-box>

    <a-box position="93 0 -142" rotation="0 90 0" mixin="heightWall wallColor" geometry="width: 20; depth: 170"
      static-body></a-box>

    <!-- Models -->

    <a-entity gltf-model="#giftModelAit" scale="3 3 3" position="-152 5 122" rotation="0 -180 0" id="gift1"
      visible="true"
      animation="property: rotation; to: 0 -180 20; loop: true; dur: 2000; easing: linear; dir: alternate;"></a-entity>

    <a-entity gltf-model="#giftModelAit" scale="4 4 4" position="-114 5 -150" rotation="0 0 0" id="gift2" visible="true"
      animation="property: position; to: -114 2 -150; loop: true; dur: 2000; easing: linear; dir: alternate;">
    </a-entity>

    <a-entity gltf-model="#giftModelAit" scale="3 3 3" position="-28 5 64" rotation="0 -180 0" id="gift3" visible="true"
      animation="property: position; to: -28 2 64; loop: true; dur: 2000; easing: linear; dir: alternate;"></a-entity>

    <a-entity gltf-model="#giftModelAit" scale="3 3 3" position="28 5 64" rotation="0 -270 0" id="gift4" visible="true"
      animation="property: rotation; to: 0 -270 20; loop: true; dur: 2000; easing: linear; dir: alternate;"></a-entity>

    <a-entity gltf-model="#giftModelAit" scale="3 3 3" position="157 5 130" rotation="0 -180 0" id="gift5"
      visible="true"
      animation="property: rotation; to: 0 -180 20; loop: true; dur: 2000; easing: linear; dir: alternate;"></a-entity>

    <a-entity gltf-model="#giftModelAit" scale="3 3 3" position="140 5 -174" rotation="0 -90 0" id="gift6"
      visible="true"
      animation="property: position; to: 140 2 -174; loop: true; dur: 2000; easing: linear; dir: alternate;"></a-entity>

    <a-entity id="tree" gltf-model="#treeModelAit" scale="3 3 3" rotation="0 45 0" position="-14 -53 -40" id="tree"
      visible="true"></a-entity>

    <!-- Lights -->

    <a-light color="#ffffff" intensity="0.3" position="169 48.503 -430.418" type="directional"></a-light>

    <a-light color="#ffffff" intensity="1.05" position="0 0 0" type="ambient"></a-light>
  </a-scene>

  <audio id="steps" style="display:none">
    <source src="/assets/sounds/steps.mp3" type="audio/mpeg" />
  </audio>

  <audio id="magic" style="display:none">
    <source src="/assets/sounds/magic.wav" type="audio/mpeg" />
  </audio>

  <script src="/components/audio_steps.js"></script>
  <script src="/components/game.js"></script>
  <script src="/components/fetch.js"></script>

</body>

</html>